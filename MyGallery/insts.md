사진을 찍으면 내부 저장소에 저장되고 안드로이드의 미디어 데이터베이스에도 사진 정보가 저장된다.

저장된 미디어 데이터는 콘텐츠 프로바이더 (Contents Provider)를 사용해서 다른 앱에 공개될 수 있다.

콘텐츠 프로바이더란 앱의 데이터 접근을 다른 앱에 허용하는 컴포넌트이다. 

> 프로바이더를 이용하여 사진 정보를 가져오는 순서
1. 사진 데이터는 외부 저장소에 저장되어 있으므로 외부 저장소 읽기 권한을 앱에 부여
2. 외부 저장소 읽기 권한은 위험 권한으로 실행 중에 사용자에게 권한을 허용하도록 함
3. contentResolver 객체를 이용하여 데이터를 Cursor 객체로 가지고 옴


> 앱의 동작 순서
1. 프로바이더로 기기의 사진 경로 얻기
2. 매니페스트에 외부 저장소 읽기 권한 추가
3. 권한 확인
4. 권한 요청
5. 앱 실행


> 안드로이드 4대 컴포넌트
>> 액티비티 : 화면 구성
>> 콘텐츠 프로바이더 : 데이터베이스, 파일, 네트워크의 데이터를 다른 앱에 공유
>> 브로드캐스트 리시버 : 앱이나 기기가 발송하는 방송 수신
>> 서비스 : 화면이 없고 백그라운드 작업에 용이


> 안드로이드 저장소
>> 내부 저장소 : OS가 설치된 영역으로, 유저가 접근할 수 없는 시스템 영역. 앱이 사용하는 정보와 데이터 베이스가 저장됨.
>> 외부 저장소 : 컴퓨터에 기기를 연결하면 저장소로 인식되고 유저가 사용하는 영역. 사진과 동영상은 모두 외부 저장소에 저장됨.




#URI
-URI는 안드로이드 기기 내부의 데이터를 표현하는 방법이다.

안드로이드 기기의 사진 정보는 Uri 클래스로 표현한다. 

mutableListOf()라는 모든 사진 정보를 담을 수 있고, 수정 가능한 리스트를 생성하는 함수를 생성한다. 

-사진은 고유한 URI를 가지고 있고, 절대적인 경로가 아닌 안드로이드 내부에서 식별하기 위해서 별도의 규칙을 통하여 정의된 값이다.

MediaStore.Images.Media.EXTERNAL_CONTENT_URI가 미디어를 가리키는 URI이다.

ContentUris 클래스를 사용하면 사진이 저장된 DB의 id를 붙이는 형태의 URI 결합을 쉽게 할 수 있다.

#Cursor
-Cursor는 Closeable 인터페이스를 상속한 인터페이스이다.

Closeable 인터페이스는 close() 메서드를 가지고 있다. 

Closeable 인터페이스를 구현하고 있는 객체에 use() 확장 함수를 사용하면 사용이 끝나고, 자동으로 close() 메서드를 호출해준다.

-사진 정보를 담고 있는 Cursor 객체는 내부적으로 데이터를 이동하는 포인터를 가지고 있다.

moveToNext() 메서드를 통해서 다음 정보로 이동하고 그 결과를 true로 반환한다.

while 문을 통하여 모든 데이터를 순회할 수 있으며, Cursor 객체는 사진이 없을 때 null이다.

